{"version":3,"file":"chunks/403.df2b2d7c6c264b09b9c3.min.js","mappings":"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","sources":["webpack://nuplone/./src/nuplone_components/behaviour.js","webpack://nuplone/./src/nuplone_components/editlink.js","webpack://nuplone/./src/nuplone_components/ordering.js","webpack://nuplone/./src/nuplone_components/z3cform.js","webpack://nuplone/./bundle-config.js"],"sourcesContent":["/** Markup Pattern Library.\n *\n * Copyright 2009-2011 W. Akkerman\n */\nimport $ from \"jquery\";\n\nconst mapal = {\n    widthClasses: {},\n\n    // Utility methods\n    registerWidthClass: function(cls, minimum, maximum) {\n        mapal.widthClasses[cls] = { minimum: minimum,\n                                    maximum: maximum };\n    },\n\n    _renumberAttribute: function(el, attr, i) {\n        var $el = $(el),\n            buf = $el.attr(attr);\n        if (buf) {\n            $el.attr(attr, buf.replace(/[0-9]+/, i));\n        }\n    },\n\n    renumber: function($container, selector) {\n        var $entries = $container.find(selector ? selector : \"fieldset,tr,dd\"),\n            entry, i;\n        var _renumber = function() {\n            mapal._renumberAttribute(this, \"for\", i);\n            mapal._renumberAttribute(this, \"id\", i);\n            mapal._renumberAttribute(this, \"name\", i);\n        };\n        for (i=0; i<$entries.length; i++) {\n            entry = $entries.get(i);\n            mapal._renumberAttribute(entry, \"id\", i);\n            $(\"label, :input\", entry).each(_renumber);\n        }\n    },\n\n    // Give the first input element with the autofocus class the focus\n    initAutofocus: function(root) {\n        var $elements = $(\":input.autofocus\", root), i;\n\n        for (i=0; i < $elements.length; i+=1) {\n            if (!$elements.eq(i).val()) {\n                $elements.get(i).focus();\n                break;\n            }\n        }\n        if (i===$elements.length) {\n            $elements.eq(0).focus();\n        }\n    },\n\n    // A simple autocomplete pattern\n    initAutocomplete: function(root) {\n          $(\"input.autocomplete\", root).each(function() {\n              var $input = $(this),\n                  name = $input.attr(\"name\"),\n                  $storage;\n              $input.attr(\"name\", \"_\"+name);\n              $storage=$(\"<input type='hidden'/>\").attr(\"name\", name).insertBefore($input);\n              $input.autocomplete({source: $input.attr(\"src\"),\n                                   minLength: 2,\n                                   select: function(event, ui) {\n                                        $storage.val(ui.item.value);\n                                        $input.val(ui.item.label);\n                                        return false;\n                                   }\n                                   });\n          });\n    },\n\n    // Check if all dependencies as specified in `command` for\n    // an element are satisfied.\n    verifyDependencies: function($slave, command) {\n        var result=[],\n            $form = $slave.closest(\"form\"),\n            $input, i, value, parts;\n\n        if (!$form.length) {\n            $form=$(document);\n        }\n        for (i=0; i<command.on.length; i++) {\n            parts=command.on[i];\n\n            $input = $form.find(\":input[name='\"+parts[0]+\"']\");\n            if (!$input.length) {\n                result.push(false);\n                continue;\n            }\n\n            if ($input.attr(\"type\")===\"radio\" || $input.attr(\"type\")===\"checkbox\") {\n                value = $input.filter(\":checked\").val();\n            } else {\n                value = $input.val();\n            }\n\n            if ((parts.length===1 || parts[1]===\"on\") && !value) {\n                result.push(false);\n                continue;\n            } else if (parts[1]===\"off\" && value) {\n                result.push(false);\n                continue;\n            } else if (parts.length>2) {\n                if (parts[1]===\"equals\" && parts[2]!==value) {\n                    result.push(false);\n                    continue;\n                } else if (parts[1]===\"notEquals\" && parts[2]===value) {\n                    result.push(false);\n                    continue;\n                }\n            }\n            result.push(true);\n        }\n\n        if (command.type===\"or\") {\n            for (i=0; i<result.length; i++) {\n                if (result[i]) {\n                    return true;\n                }\n            }\n            return false;\n        } else {\n            for (i=0; i<result.length; i++) {\n                if (!result[i]) {\n                    return false;\n                }\n            }\n            return true;\n        }\n    },\n\n\n    // Return the list of all input elements on which the given element has\n    // a declared dependency via `dependsOn` classes.\n    getDependMasters: function($slave, command) {\n        var $result = $(),\n            $form = $slave.closest(\"form\"),\n            i, parts;\n\n        if (!$form.length) {\n            $form=$(document);\n        }\n\n        for (i=0; i<command.on.length; i++) {\n            parts=command.on[i];\n            if (!parts) {\n                continue;\n            }\n\n            $result=$result.add($form.find(\":input[name='\"+parts[0]+\"']\"));\n        }\n\n        return $result;\n    },\n\n\n    // Setup dependency-tracking behaviour.\n    initDepends: function(root) {\n        $(\"*[class*='dependsOn-']\", root).each(function() {\n            var slave = this,\n                $slave = $(this),\n                $visible = $(this),\n                $panel = $slave.data(\"mapal.infoPanel\"),\n                classes = $slave.attr(\"class\").split(\" \"),\n                command = {\"on\" : [],\n                           \"action\" : \"show\",\n                           \"type\": \"and\"\n                           };\n            var i, a, parts, state;\n\n            for (i=0; i<classes.length; i++) {\n                parts=classes[i].split(\"-\");\n                if (parts[0].indexOf(\"depends\")===0) {\n                    a=parts[0].substr(7).toLowerCase();\n                    if (a===\"on\") {\n                        if (parts.length>4) {\n                            parts=parts.slice(0,3).concat(parts.slice(3).join(\"-\"));\n                        }\n                        command.on.push(parts.slice(1));\n                    } else {\n                        command[a]=parts[1];\n                    }\n                }\n            }\n\n            state=mapal.verifyDependencies($slave, command);\n            if ($panel!==undefined) {\n                $visible=$visible.add($panel);\n            }\n\n            if (command.action===\"show\") {\n                if (state) {\n                    $visible.show();\n                } else {\n                    $visible.hide();\n                }\n            } else if (command.action===\"enable\") {\n                if (state) {\n                    slave.disabled=null;\n                    $slave.removeClass(\"disabled\");\n                } else {\n                    slave.disabled=\"disabled\";\n                    $slave.addClass(\"disabled\");\n                }\n            }\n\n            mapal.getDependMasters($slave, command).bind(\"change.mapal\", function() {\n                state=mapal.verifyDependencies($slave, command);\n                if (command.action===\"show\") {\n                    if (state) {\n                        $visible.slideDown();\n                    } else {\n                        $visible.slideUp();\n                    }\n                } else if (command.action===\"enable\" ) {\n                    if (state) {\n                        slave.disabled=null;\n                        $slave.removeClass(\"disabled\");\n                    } else {\n                        slave.disabled=\"disabled\";\n                        $slave.addClass(\"disabled\");\n                    }\n                }\n            });\n        });\n    },\n\n\n    // check if an input element has a value.\n    hasContent: function($el) {\n        if ($el.is(\":input\")) {\n            return $el.val();\n        } else {\n            return $el.text().replace(/\\s*/g, \"\") || $el.find(\"img,object,video,audio\").length;\n        }\n    },\n\n    // Support for superimposing labels on input elements\n    initSuperImpose: function(root) {\n        $(\"label.superImpose\", root).each(function() {\n            var $label = $(this),\n                forInput = $label.attr(\"for\").replace(/([.\\[\\]])/g, \"\\\\$1\"),\n                $myInput = forInput ? $(\":input#\"+forInput+\", .rich[id=\"+forInput+\"]\") : $(\":input\", this);\n\n            if (!$myInput.length) {\n                return;\n            }\n\n            $label\n                .css(\"display\", mapal.hasContent($myInput) ? \"none\" : \"block\")\n                .click(function() {\n                    $myInput.focus();\n                });\n\n            setTimeout(function() {\n                $label.css(\"display\", mapal.hasContent($myInput) ? \"none\" : \"block\");\n                }, 250);\n\n            $myInput\n                .bind(\"blur.mapal\", function() {\n                    $label.css(\"display\", mapal.hasContent($myInput) ? \"none\" : \"block\");\n                })\n                .bind(\"focus.mapal\", function() {\n                    $label.css(\"display\", \"none\");\n                });\n        });\n    },\n\n\n    // Apply some standard markup transformations\n    initTransforms: function(root) {\n        $(\".jsOnly\", root).show();\n\n        $(\"legend\", root).each(function() {\n            var p = $('<p>'+$(this).html()+'</p>');\n            $(this).replaceWith(p);\n\n            // Copy over its attributes\n            $.each($(this).get(0).attributes, function(i, a) {p.attr(a.nodeName, a.nodeValue);});\n            if (p.attr('class')) {\n                p.attr('class', p.attr('class') + ' legend');\n            }\n            else p.attr('class', 'legend');\n        });\n    },\n\n\n    // Manage open/close/hasChild classes for a ul-based menu tree\n    initMenu: function(root) {\n        $(\"ul.menu\").each(function() {\n            var $menu = $(this),\n                timer,\n                closeMenu, openMenu,\n                mouseOverHandler, mouseOutHandler;\n\n            openMenu = function($li) {\n                if (timer) {\n                    clearTimeout(timer);\n                    timer = null;\n                }\n\n                if (!$li.hasClass(\"open\")) {\n                    $li.siblings(\"li.open\").each(function() { closeMenu($menu);});\n                    $li.addClass(\"open\").removeClass(\"closed\");\n                }\n            };\n\n            closeMenu = function($li) {\n                $li.find(\"li.open\").addBack().removeClass(\"open\").addClass(\"closed\");\n            };\n\n            mouseOverHandler = function() {\n                var $li = $(this);\n                openMenu($li);\n            };\n\n            mouseOutHandler = function() {\n                var $li = $(this);\n\n                if (timer) {\n                    clearTimeout(timer);\n                    timer=null;\n                }\n\n                timer = setTimeout(function() { closeMenu($li); }, 1000);\n            };\n\n            $(\"ul.menu li\", root)\n                .addClass(\"closed\")\n                .filter(\":has(ul)\").addClass(\"hasChildren\").end()\n                .bind(\"mouseover.mapal\", mouseOverHandler)\n                .bind(\"mouseout.mapal\", mouseOutHandler);\n        });\n    },\n\n    // Utility method to facilitate AJAX content loading\n    loadSnippet: function(url, selector, target, callback) {\n        var $factory = $(\"<div/>\"),\n            $target = $(\"#\"+target);\n\n        if ($target.length===0) {\n            $target = $(\"<div/>\")\n                .css(\"opacity\", 0)\n                .appendTo(document.body);\n        }\n\n        function htmlLoaded(data, textStatus, response) {\n            if (response.status < 200 || response.status >= 400) {\n                return;\n            }\n\n            $target.replaceWith(\n                    $factory.find(\"#\"+selector)\n                        .attr(\"id\", target)\n                        .css(\"opacity\", 0));\n            $target = $(\"#\"+target);\n\n            mapal.initContent($target);\n            callback($target);\n        }\n\n        $target.animate({opacity: 0}, \"slow\", function() {\n            url = url + \" #\" + selector;\n            $factory.load(url, htmlLoaded);\n        });\n    },\n\n    // Enable DOM-injection from anchors\n    initDomInjection: function () {\n        $(\"a[rel^='#']\").on(\"click.mapal\", function (e) {\n            var $a = $(this),\n                parts = $a.attr(\"href\").split(\"#\", 2),\n                target = $a.attr(\"rel\").slice(1);\n\n            mapal.loadSnippet(parts[0], parts[1], target, function($target) {\n                $target.animate({opacity: 1}, \"fast\");\n            });\n\n            e.preventDefault();\n        });\n    },\n\n    // Event handler for forms in a panel\n    panelFormHandler: function(data, status, xhr, $form) {\n        // regexp taken from jQuery 1.4.1\n        var rscript = /<script(.|\\s)*?\\/script>/gi,\n            $trigger = $(this.context),\n            href = this.context.tagName.toLowerCase()===\"a\" ? $trigger.attr(\"href\") : $trigger.attr(\"name\"),\n            action = $form.attr(\"action\"),\n            $panel = $(\"#panel\"),\n            ct = xhr.getResponseHeader(\"content-type\"),\n            isJSON = ct.indexOf(\"application/json\") >= 0,\n            $tree, target;\n\n        // Error or validation error\n        if (isJSON || xhr.status !== 202) {\n            if (isJSON) {\n                var reply = $.parseJSON(xhr.responseText);\n                $trigger.trigger(\"ajaxFormResult\", reply);\n                if (reply.action===\"reload\") {\n                    location.reload();\n                } else if (reply.action===\"close\" || !reply.action) {\n                    $panel.overlay().close();\n                    $panel.remove();\n                }\n                return;\n            } else {\n                $trigger.trigger(\"ajaxFormResult\");\n            }\n            $panel.overlay().close();\n            $panel.remove();\n            return;\n        }\n\n        if (action.indexOf(\"#\")>0) {\n            target = action.split(\"#\", 2)[1];\n        } else {\n            target = href.split(\"#\", 2)[1];\n        }\n\n        $tree = $(\"<div/>\").append(data.replace(rscript, \"\"));\n        $tree = $tree.find(\"#\"+target).attr(\"id\", \"panel-content\");\n        mapal.initContent(target);\n        $(\"#panel-content\").replaceWith($tree);\n        $panel.find(\"form\").ajaxForm({context: this.context,\n                                      success: mapal.panelFormHandler});\n    },\n\n    // Load (part of a) page and open it in a modal panel\n    initPanels: function() {\n        $(\"a.openPanel[href*='#'], button.openPanel[name*='#']\").on(\"click.mapal\", function (e) {\n            var $trigger = $(this),\n                href = this.tagName.toLowerCase()===\"a\" ? $trigger.attr(\"href\") : $trigger.attr(\"name\"),\n                parts = href.split(\"#\", 2),\n                $panel = $(\"#panel\");\n\n            if ($panel.length===0) {\n                $panel = $(\"<div/>\")\n                    .attr(\"id\", \"panel\")\n                    .appendTo(document.body);\n                $(\"<div/>\")\n                    .attr(\"id\", \"panel-content\")\n                    .appendTo($panel);\n            }\n\n            mapal.loadSnippet(parts[0], parts[1], \"panel-content\", function($target) {\n                var api;\n\n                $target.css(\"opacity\", 1).addClass(\"panel\");\n                $(\"#panel form\").ajaxForm({context: $trigger.get(0),\n                                           success: mapal.panelFormHandler});\n                api = $panel.overlay({api: true,\n                                      closeOnClick: false,\n                                      expose: {color: \"#333\", loadSpeed: 200, opacity: 0.9}});\n                api.load();\n            });\n\n            e.preventDefault();\n        });\n    },\n\n\n    closeTooltips: function() {\n        $(\"dfn.infoPanel.open\").removeClass(\"open\");\n        $(\"body\").unbind(\"click.tooltip\");\n    },\n\n    initTooltip: function(root) {\n        $(\"dfn.infoPanel:not(span)\").each(function() {\n            var $panel = $(this),\n                title = $panel.attr(\"title\");\n\n            if ($panel.data(\"mapal.tooltip\")) {\n                return;\n            }\n\n            if (title) {\n                $(\"<span/>\")\n                    .addClass(\"title\")\n                    .text(title)\n                    .prependTo($panel);\n                $panel.removeAttr(\"title\");\n            }\n\n            $panel\n                .click(function(event) {\n                    if ($panel.hasClass(\"open\")) {\n                        $panel.removeClass(\"open\");\n                        $(\"body\").unbind(\"click.tooltip\");\n                    } else {\n                        mapal.closeTooltips();\n                        $panel.addClass(\"open\");\n                        $(\"body\").one(\"click.tooltip\", mapal.closeTooltips);\n                    }\n                    event.stopPropagation();\n                })\n                .data(\"mapal.tooltip\", true);\n        });\n    },\n\n    // Utility method to update the width classes on the body\n    updateWidthClasses: function() {\n        var width = $(window).width(),\n            $body = $(\"body\"),\n            limits;\n\n        for (var cls in mapal.widthClasses) {\n            if (mapal.widthClasses.hasOwnProperty(cls)) {\n                limits=mapal.widthClasses[cls];\n                if ((limits.minimum===null || limits.minimum<=width) && (limits.maximum===null || width<=limits.maximum)) {\n                    $body.addClass(cls);\n                } else {\n                    $body.removeClass(cls);\n                }\n            }\n        }\n    },\n\n\n    initWidthClasses: function() {\n        mapal.updateWidthClasses();\n        $(window).bind(\"resize.mapal\", mapal.updateWidthClasses);\n    },\n\n\n    // No browser supports all DOM methods to get from an object to its\n    // parent window and document and back again, so we convert all\n    // html objects to iframes.\n    initIframes: function(root) {\n        $(\"object[type=text/html]\", root).each(function() {\n            var $object = $(this),\n                $iframe = $(\"<iframe allowtransparency='true'/>\");\n\n            $iframe\n                .attr(\"id\", $object.attr(\"id\"))\n                .attr(\"class\", $object.attr(\"class\"))\n                .attr(\"src\", $object.attr(\"data\"))\n                .attr(\"frameborder\", \"0\")\n                .attr(\"style\", \"background-color:transparent\");\n            $object.replaceWith($iframe);\n        });\n    },\n\n    // Setup a DOM tree.\n    initContent: function(root) {\n        mapal.initTransforms(root);\n        mapal.initAutofocus(root);\n        mapal.initAutocomplete(root);\n        mapal.initDepends(root);\n        mapal.initSuperImpose(root);\n        mapal.initTooltip(root);\n        mapal.initMenu(root);\n        $(root).trigger(\"newContent\", root);\n    },\n\n\n    // Setup global behaviour\n    init: function() {\n        mapal.initWidthClasses();\n        mapal.initDomInjection();\n        mapal.initPanels();\n    }\n};\n\n\n$(document).ready(function() {\n    mapal.registerWidthClass(\"narrow\", 0, 780);\n    mapal.registerWidthClass(\"medium\", 0, 1109);\n    mapal.registerWidthClass(\"wide\", 1110, null);\n    mapal.init();\n    mapal.initContent(document.body);\n    $(document).trigger(\"setupFinished\", document);\n});\n","import $ from \"jquery\";\n\nconst editlink = {\n    // Define these here since IE does not have Node constants\n    ELEMENT_NODE: 1,\n    TEXT_NODE: 3,\n\n    current_range: null,\n\n    reset: function() {\n        $(\"#external form\")[0].reset();\n        $(\"em.message.warning\").remove();\n    },\n\n    hide: function() {\n        var topDoc = window.frameElement.ownerDocument;\n        $(\"#linkFrame\", topDoc).css({top: \"-2000px\"});\n    },\n\n    show: function(el) {\n        var topDoc = window.frameElement.ownerDocument,\n            topWindow = topDoc.defaultView!==undefined ? topDoc.defaultView : topDoc.parentWindow,\n            selection;\n\n        if (el===undefined) {\n            selection=rangy.getSelection(topWindow);\n            editlink.current_range=(selection.rangeCount===0) ? null : selection.getRangeAt(0).cloneRange();\n            editlink.reset();\n        } else {\n            editlink.current_range=rangy.createRange(topDoc);\n            editlink.current_range.selectNode(el);\n            $(\"input[name=form.widgets.new_window:list]\").get(0).checked = (el.target===\"_blank\");\n            $(\"input[name=form.widgets.URL]\").val(el.href);\n            $(\"input[name=form.widgets.title]\").val(el.title);\n        }\n\n        $(\"#linkFrame\", topDoc).css({top: \"70px\"});\n    },\n\n    removeLink: function() {\n        var topDoc = window.frameElement.ownerDocument,\n            topWindow = topDoc.defaultView!==undefined ? topDoc.defaultView : topDoc.parentWindow,\n            selection = rangy.getSelection(topWindow),\n            range, link, found;\n\n        if (selection.rangeCount===0 || selection.isCollapsed)\n            return;\n        link = selection.anchorNode;\n        found=false;\n        while (link!==null && !found) {\n            if (link.nodeType===editlink.ELEMENT_NODE && link.tagName===\"A\")\n                found=true;\n            else\n              link=link.parentNode;\n        }\n        if (!found)\n            return;\n\n        var $link = $(link);\n        $link.replaceWith($link.contents());\n    },\n\n    InsertURL: function(url, title, newwindow) {\n        var topDoc = window.frameElement.ownerDocument,\n            topWindow = topDoc.defaultView!==undefined ? topDoc.defaultView : topDoc.parentWindow,\n            selection = rangy.getSelection(topWindow),\n            range, link, found;\n\n        if (editlink.current_range===null)\n            return;\n\n        selection.setSingleRange(editlink.current_range);\n        if (editlink.current_range.collapsed || !editlink.current_range.canSurroundContents()) {\n              link = topDoc.createElement(\"A\");\n              link.appendChild(topDoc.createTextNode(title || url));\n              editlink.current_range.insertNode(link);\n        } else {\n          // Try to find a parent link\n            link = editlink.current_range.startContainer;\n            found=false;\n            while (link!==null && !found) {\n                if (link.nodeType===editlink.ELEMENT_NODE && link.tagName===\"A\")\n                    found=true;\n                else\n                  link=link.parentNode;\n            }\n            if (!found) {\n                link = topDoc.createElement(\"A\");\n                editlink.current_range.surroundContents(link);\n            }\n        }\n        if (url && url.indexOf(\":\")===-1 && url[0]!==\"/\") {\n            url = \"http://\"+url;\n        }\n        link.href = url;\n        link.target = newwindow ? \"_blank\" : \"\";\n        link.title = title || \"\";\n    },\n\n    init: function() {\n        $(\"button.cancel\").on(\"click\", editlink.hide);\n\n        $(\"button.save\").on(\"click\", function() {\n            var form = this.form,\n                link = form[\"form.widgets.URL\"].value,\n                title = form[\"form.widgets.title\"].value,\n                newwindow = form[\"form.widgets.new_window:list\"].checked;\n            editlink.InsertURL(link, title, newwindow);\n            editlink.hide();\n        });\n    }\n};\n\nconst hide = editlink.hide;\nconst show = editlink.show;\nconst removeLink = editlink.removeLink;\n\n$(document).ready(function() {\n    editlink.init();\n});\n","import $ from \"jquery\";\n\n$(document).ready(function() {\n    $(\".sortable\").sortable({containment: \"parent\" });\n    $(\".sortable\").on(\"sortstop\", function(e, ui) {\n        var order = $.map($(\".sortable > *\"), function(e) { return e.id;} );\n        $.post(plone.context_url+\"/@@update-order\", {order: order});\n    });\n});\n","import $ from \"jquery\";\n\nconst z3cform = {\n    getText: function(node) {\n        var text=\"\";\n\n        for (var child=node.firstChild; child!==null && child.nodeType===3; child=child.nextSibling)\n            text+=child.nodeValue;\n        return text;\n    },\n\n    setText: function(node, text) {\n        var child;\n        while (node.firstChild!==null && node.firstChild.nodeType===3)\n            node.removeChild(node.firstChild);\n        var text_node = document.createTextNode(text);\n        if (node.firstChild===null)\n            node.appendChild(text_node);\n        else\n            node.insertBefore(text_node, node.firstChild);\n    },\n\n    renumberElement: function (el, attr, i) {\n        var $el = $(el),\n            buf = $el.attr(attr);\n        if (buf) {\n            $el.attr(attr, buf.replace(/[0-9]+/, i));\n        }\n    },\n\n    renumber: function($fieldset) {\n        var $fieldsets = $fieldset.children(\"fieldset\"),\n            i;\n        $(\":input:first\", $fieldset).val($fieldsets.length);\n\n        for (i=0; i<$fieldsets.length; i++) {\n            $(\"label, :input\", $fieldsets[i]).each(function() {\n                z3cform.renumberElement(this, \"for\", i);\n                z3cform.renumberElement(this, \"id\", i);\n                z3cform.renumberElement(this, \"name\", i);\n            });\n        }\n    },\n\n    initialiseExamples: function() {\n\t$(\"form :input\").each(function() {\n\t    var selector = /form\\.widgets\\.(.*)/.exec(this.name);\n\t    if (selector===null)\n\t\treturn;\n\t    selector=\"#simulation .example-\"+selector[1];\n\t    var $examples = $(selector);\n\t    if ($examples.length===0)\n\t\treturn;\n\t    $(this)\n\t\t.focus(function() { $(selector).addClass(\"focus\"); })\n\t\t.blur(function() { $(selector).removeClass(\"focus\"); })\n\t\t.keyup(function() {\n\t\t    var text = this.value;\n\t\t    $(selector).each(function() {\n\t\t\tvar $this = $(this);\n\t\t\tif (!$this.data(\"original\")) {\n\t\t\t    $this.data(\"original\", z3cform.getText(this));\n\t\t\t    if (!text)\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!text)\n\t\t\t    text=$this.data(\"original\");\n\t\t\tz3cform.setText(this, text);\n\t\t    });\n\t\t})\n\t\t.keyup();\n\t});\n    },\n\n    initialiseMultiwidget: function() {\n        $(\".multiWidget > button.add\").on(\"click\", function() {\n            var $button = $(this),\n                url = $button.val();\n            $.get(url, function(data, status) {\n                var $fragment=$(data);\n                $button.before($fragment);\n                z3cform.renumber($button.parent());\n            });\n        });\n\n        $(\".multiWidget > fieldset > button.remove\").on(\"click\", function() {\n            var $button = $(this),\n                $fieldset = $button.parent(),\n                $root = $fieldset.parent();\n\n            $fieldset.remove();\n            z3cform.renumber($root);\n        });\n    },\n\n    onTinyActivate: function(ed) {\n        try {\n            $(\"#tinyControls\").get(0).contentWindow.activate(ed);\n        } catch(e) {\n        }\n\n        if (!$(\"body\").hasClass(\"edit\")) {\n            $(\"body\").addClass(\"edit\");\n        }\n\n    },\n\n    onTinyDeactivate: function(ed) {\n        try {\n            $(\"#tinyControls\").get(0).contentWindow.deactivate(ed);\n        } catch(e) {\n        }\n    },\n\n    onTinySetup: function(ed) {\n        ed.onDblClick.add(function(ed, e) {\n            if (e.target.nodeName.toLowerCase()==\"a\") {\n                $(\"#linkFrame\").get(0).contentWindow.show(e.target);\n            }\n        });\n\n        ed.onActivate.add(z3cform.onTinyActivate);\n        ed.onDeactivate.add(z3cform.onTinyDeactivate);\n    },\n\n    onFormSubmit: function() {\n        $(\"div.rich.input\", this).each(function() {\n            var $field = $(this),\n                id = $field.attr(\"id\"),\n                value = tinyMCE.get(id).getContent(),\n                name = $field.data(\"z3cform.name\");\n            if (name) {\n                $(\"<input/>\")\n                    .attr(\"type\", \"hidden\")\n                    .attr(\"name\", name)\n                    .val(value)\n                    .insertBefore($field);\n            }\n        });\n        return true;\n    },\n\n    loadEditorIframes: function() {\n        var $wrapper = $(\"#frameWrapper\");\n\n        if (!$wrapper.length) {\n            $wrapper=$(\"<p/>\").attr(\"id\", \"frameWrapper\").appendTo(document.body);\n        }\n\n        if (!$(\"#tinyControls\").length) {\n            $(\"<iframe/>\")\n                .attr(\"id\", \"tinyControls\")\n                .attr(\"src\", plone.context_url+\"/@@tiny-controls.html\")\n                .css(\"position\", \"absolute\")\n                .css(\"top\", \"0px\")\n                .css(\"left\", \"0px\")\n                .css(\"z-index\", \"1100\")\n                .appendTo($wrapper);\n        }\n\n        if (!$(\"#linkFrame\").length) {\n            $(\"<iframe/>\")\n                .attr(\"id\", \"linkFrame\")\n                .attr(\"src\", plone.context_url+\"/@@edit-link.html\")\n                .attr(\"frameborder\", \"0\")\n                .css(\"z-index\", \"1100\")\n                .css(\"height\", \"250px\")\n                .css(\"width\", \"510px\")\n                .css(\"margin-left\", \"-255px\")\n                .css(\"left\", \"50%\")\n                .css(\"position\", \"absolute\")\n                .css(\"top\", \"-2000px\")\n                .css(\"-webkit-box-shadow\", \"0 0 15px rgba(0,0,0,0.5)\")\n                .css(\"-moz-box-shadow\", \"0 0 15px rgba(0,0,0,0.5)\")\n                .css(\"box-shadow\", \"0 0 15px rgba(0,0,0,0.5)\")\n                .appendTo($wrapper);\n        }\n    },\n\n    // Helper method to deactivate all tiny editors.\n    deactivateTiny: function() {\n        try {\n            tinymce.EditorManager._setActive(null);\n            z3cform.onTinyDeactivate();\n        } catch (e) {\n        }\n    },\n\n    doTransforms: function(root) {\n        // Replace rich textareas with a div, and activate a tinyMCE editor\n        // for them.\n        $(\"textarea.rich\", root).each(function() {\n            var $textarea = $(this),\n                id = $textarea.attr(\"id\"),\n                $div = $(\"<div/>\");\n\n            $div\n                .attr(\"id\", id)\n                .addClass(\"rich\")\n                .addClass(\"input\")\n                .data(\"z3cform.name\", $textarea.attr(\"name\"))\n                .html($textarea.val());\n            $textarea.replaceWith($div);\n            mapal.initContent($div.parent());\n        });\n    },\n\n    initialiseRichTextEditor: function(root) {\n        if ($(\"div.rich.input\", root).length===0) {\n            return;\n        }\n\n        z3cform.loadEditorIframes();\n\n        tinyMCE.init({mode: \"none\",\n                      theme: \"dummy\",\n                      element_format: \"xhtml\",\n                      fix_list_elements: true,\n                      fix_table_elements: true,\n                      entity_encoding: \"raw\",\n                      content_editable: true,\n                      forced_root_block: null,\n                      setup: z3cform.onTinySetup\n                     });\n\n        // Make sure to deactivate tiny when a non-tiny field gets the\n        // focus. This will automatically disable the relevant actions\n        // in the toolbar.\n        $(\":input\", root).focus(z3cform.deactivateTiny);\n\n        // Deactivate tiny editors after they are added. This guarantees\n        // that we receive the correct activate event when the editor gets\n        // the focus.\n        tinymce.onAddEditor.add(z3cform.deactivateTiny);\n\n        // Replace rich textareas with a div, and activate a tinyMCE editor\n        // for them.\n        $(\"div.rich.input\", root).each(function() {\n            tinyMCE.execCommand(\"mceAddControl\", false, this.id);\n        });\n\n        // Check for focus and existing content to determine visibility\n        // of any superimposed labels\n        $(\".rich.input:not(:input)\", root).each(function() {\n            var $el = $(this),\n                $component = $el.closest(\".richInput\");\n\n            if (!$component.length) {\n                return;\n            }\n\n            function update() {\n                if (mapal.hasContent($el)) {\n                    $component.removeClass(\"empty\");\n                } else {\n                    $component.addClass(\"empty\");\n                }\n            }\n\n            update();\n\n            $el.bind(\"focus.z3cform\", function() {\n                    $component.data(\"z3cform.timer.rich\", setInterval(update, 100));\n                })\n                .bind(\"blur.z3cform\", function() {\n                    update();\n                    clearInterval($component.data(\"z3cform.timer.rich\"));\n                });\n        });\n\n        $(\"form\", root).bind(\"submit.z3cform\", z3cform.onFormSubmit);\n    },\n\n    initContent: function(root) {\n        z3cform.doTransforms();\n        $(window).on(\"load\", function() {\n            z3cform.initialiseRichTextEditor(root);\n        });\n    },\n\n    init: function() {\n        z3cform.initialiseMultiwidget();\n        z3cform.initialiseExamples();\n    }\n};\n\n\n$(document).ready(function() {\n    z3cform.init();\n    z3cform.initContent();\n});\n","import registry from \"@patternslib/patternslib/src/core/registry\";\n\n// Pattern imports\nimport \"@patternslib/pat-redactor/src/pat-redactor\";\nimport \"redactor/src/redactor.css\";\n\n// Jquery UI\n// Includes: core.js, widget.js, mouse.js, position.js, draggable.js, droppable.js, resizable.js, selectable.js, sortable.js, accordion.js, autocomplete.js, button.js, datepicker.js, dialog.js, menu.js, progressbar.js, selectmenu.js, slider.js, spinner.js, tabs.js, tooltip.js\nimport \"jquery-ui-dist/jquery-ui\";\nimport \"jquery-ui-dist/jquery-ui.css\";\nimport \"jquery-ui-dist/jquery-ui.theme.css\";\n\n// Other dependencies\nimport \"./src/nuplone_components/behaviour\";\nimport \"./src/nuplone_components/editlink\";\nimport \"./src/nuplone_components/ordering\";\nimport \"./src/nuplone_components/z3cform\";\n\nregistry.init();\n"],"names":["mapal","widthClasses","registerWidthClass","cls","minimum","maximum","_renumberAttribute","el","attr","i","$el","$","buf","replace","renumber","$container","selector","entry","$entries","find","_renumber","this","length","get","each","initAutofocus","root","$elements","eq","val","focus","initAutocomplete","$storage","$input","name","insertBefore","autocomplete","source","minLength","select","event","ui","item","value","label","verifyDependencies","$slave","command","parts","result","$form","closest","document","on","filter","push","type","getDependMasters","$result","add","initDepends","a","state","slave","$visible","$panel","data","classes","split","indexOf","substr","toLowerCase","slice","concat","join","undefined","action","show","hide","disabled","removeClass","addClass","bind","slideDown","slideUp","hasContent","is","text","initSuperImpose","$label","forInput","$myInput","css","click","setTimeout","initTransforms","p","html","replaceWith","attributes","nodeName","nodeValue","initMenu","timer","closeMenu","openMenu","mouseOverHandler","mouseOutHandler","$menu","$li","clearTimeout","hasClass","siblings","addBack","end","loadSnippet","url","target","callback","$factory","$target","htmlLoaded","textStatus","response","status","initContent","appendTo","body","animate","opacity","load","initDomInjection","e","$a","preventDefault","panelFormHandler","xhr","$tree","$trigger","context","href","tagName","isJSON","getResponseHeader","reply","responseText","trigger","location","reload","overlay","close","remove","append","ajaxForm","success","initPanels","api","closeOnClick","expose","color","loadSpeed","closeTooltips","unbind","initTooltip","title","prependTo","removeAttr","one","stopPropagation","updateWidthClasses","limits","width","window","$body","hasOwnProperty","initWidthClasses","initIframes","$object","$iframe","init","ready","editlink","ELEMENT_NODE","TEXT_NODE","current_range","reset","topDoc","frameElement","ownerDocument","top","selection","topWindow","defaultView","parentWindow","rangy","getSelection","rangeCount","getRangeAt","cloneRange","createRange","selectNode","checked","removeLink","link","found","isCollapsed","anchorNode","nodeType","parentNode","$link","contents","InsertURL","newwindow","setSingleRange","collapsed","canSurroundContents","createElement","appendChild","createTextNode","insertNode","startContainer","surroundContents","form","sortable","containment","order","id","plone","context_url","z3cform","getText","node","child","firstChild","nextSibling","setText","removeChild","text_node","renumberElement","$fieldset","$fieldsets","children","initialiseExamples","exec","blur","keyup","$this","initialiseMultiwidget","$button","$fragment","before","parent","$root","onTinyActivate","ed","contentWindow","activate","onTinyDeactivate","deactivate","onTinySetup","onDblClick","onActivate","onDeactivate","onFormSubmit","$field","tinyMCE","getContent","loadEditorIframes","$wrapper","deactivateTiny","tinymce","EditorManager","_setActive","doTransforms","$textarea","$div","initialiseRichTextEditor","mode","theme","element_format","fix_list_elements","fix_table_elements","entity_encoding","content_editable","forced_root_block","setup","onAddEditor","execCommand","$component","update","setInterval","clearInterval","registry"],"sourceRoot":""}