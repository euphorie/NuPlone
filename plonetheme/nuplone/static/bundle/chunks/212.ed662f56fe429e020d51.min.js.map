{"version":3,"file":"chunks/212.ed662f56fe429e020d51.min.js","mappings":"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","sources":["webpack://nuplone/./node_modules/redactor/src/plugins/table/table.js"],"sourcesContent":["(function($R)\n{\n    $R.add('plugin', 'table', {\n        translations: {\n            en: {\n        \t\t\"table\": \"Table\",\n        \t\t\"insert-table\": \"Insert table\",\n        \t\t\"insert-row-above\": \"Insert row above\",\n        \t\t\"insert-row-below\": \"Insert row below\",\n        \t\t\"insert-column-left\": \"Insert column left\",\n        \t\t\"insert-column-right\": \"Insert column right\",\n        \t\t\"add-head\": \"Add head\",\n        \t\t\"delete-head\": \"Delete head\",\n        \t\t\"delete-column\": \"Delete column\",\n        \t\t\"delete-row\": \"Delete row\",\n        \t\t\"delete-table\": \"Delete table\"\n        \t}\n        },\n        init: function(app)\n        {\n            this.app = app;\n            this.lang = app.lang;\n            this.opts = app.opts;\n            this.caret = app.caret;\n            this.editor = app.editor;\n            this.toolbar = app.toolbar;\n            this.component = app.component;\n            this.inspector = app.inspector;\n            this.insertion = app.insertion;\n            this.selection = app.selection;\n        },\n        // messages\n        ondropdown: {\n            table: {\n                observe: function(dropdown)\n                {\n                    this._observeDropdown(dropdown);\n                }\n            }\n        },\n        onbottomclick: function()\n        {\n            this.insertion.insertToEnd(this.editor.getLastNode(), 'table');\n        },\n\n        // public\n        start: function()\n        {\n\t\t\tvar dropdown = {\n    \t\t\tobserve: 'table',\n    \t\t\t'insert-table': {\n    \t\t\t\ttitle: this.lang.get('insert-table'),\n    \t\t\t\tapi: 'plugin.table.insert'\n    \t\t\t},\n    \t\t\t'insert-row-above': {\n                    title: this.lang.get('insert-row-above'),\n    \t\t\t\tclassname: 'redactor-table-item-observable',\n                    api: 'plugin.table.addRowAbove'\n    \t\t\t},\n    \t\t\t'insert-row-below': {\n        \t\t\ttitle: this.lang.get('insert-row-below'),\n        \t\t\tclassname: 'redactor-table-item-observable',\n                    api: 'plugin.table.addRowBelow'\n    \t\t\t},\n    \t\t\t'insert-column-left': {\n        \t\t\ttitle: this.lang.get('insert-column-left'),\n        \t\t\tclassname: 'redactor-table-item-observable',\n                    api: 'plugin.table.addColumnLeft'\n    \t\t\t},\n    \t\t\t'insert-column-right': {\n        \t\t\ttitle: this.lang.get('insert-column-right'),\n        \t\t\tclassname: 'redactor-table-item-observable',\n                    api: 'plugin.table.addColumnRight'\n    \t\t\t},\n    \t\t\t'add-head': {\n        \t\t\ttitle: this.lang.get('add-head'),\n        \t\t\tclassname: 'redactor-table-item-observable',\n                    api: 'plugin.table.addHead'\n    \t\t\t},\n    \t\t\t'delete-head': {\n        \t\t\ttitle: this.lang.get('delete-head'),\n        \t\t\tclassname: 'redactor-table-item-observable',\n                    api: 'plugin.table.deleteHead'\n    \t\t\t},\n    \t\t\t'delete-column': {\n        \t\t\ttitle: this.lang.get('delete-column'),\n        \t\t\tclassname: 'redactor-table-item-observable',\n                    api: 'plugin.table.deleteColumn'\n    \t\t\t},\n    \t\t\t'delete-row': {\n        \t\t\ttitle: this.lang.get('delete-row'),\n        \t\t\tclassname: 'redactor-table-item-observable',\n                    api: 'plugin.table.deleteRow'\n    \t\t\t},\n    \t\t\t'delete-table': {\n        \t\t\ttitle: this.lang.get('delete-table'),\n        \t\t\tclassname: 'redactor-table-item-observable',\n                    api: 'plugin.table.deleteTable'\n    \t\t\t}\n\t\t\t};\n            var obj = {\n                title: this.lang.get('table')\n            };\n\n\t\t\tvar $button = this.toolbar.addButtonBefore('link', 'table', obj);\n\t\t\t$button.setIcon('<i class=\"re-icon-table\"></i>');\n\t\t\t$button.setDropdown(dropdown);\n        },\n\t\tinsert: function()\n\t\t{\n            var rows = 2;\n\t\t\tvar columns = 3;\n\t\t\tvar $component = this.component.create('table');\n\n\t\t\tfor (var i = 0; i < rows; i++)\n\t\t\t{\n\t\t\t    $component.addRow(columns);\n\t\t\t}\n\n\t\t\t$component =  this.insertion.insertHtml($component);\n\t\t\tthis.caret.setStart($component);\n\t\t},\n        addRowAbove: function()\n        {\n            var $component = this._getComponent();\n            if ($component)\n            {\n                var current = this.selection.getCurrent();\n                var $row = $component.addRowTo(current, 'before');\n\n                this.caret.setStart($row);\n            }\n        },\n        addRowBelow: function()\n        {\n            var $component = this._getComponent();\n            if ($component)\n            {\n                var current = this.selection.getCurrent();\n                var $row = $component.addRowTo(current, 'after');\n\n                this.caret.setStart($row);\n            }\n        },\n        addColumnLeft: function()\n        {\n            var $component = this._getComponent();\n            if ($component)\n            {\n                var current = this.selection.getCurrent();\n\n                this.selection.save();\n                $component.addColumnTo(current, 'left');\n                this.selection.restore();\n            }\n        },\n        addColumnRight: function()\n        {\n            var $component = this._getComponent();\n            if ($component)\n            {\n                var current = this.selection.getCurrent();\n\n                this.selection.save();\n                $component.addColumnTo(current, 'right');\n                this.selection.restore();\n            }\n        },\n        addHead: function()\n        {\n            var $component = this._getComponent();\n            if ($component)\n            {\n                this.selection.save();\n                $component.addHead();\n                this.selection.restore();\n            }\n        },\n        deleteHead: function()\n        {\n            var $component = this._getComponent();\n            if ($component)\n            {\n                var current = this.selection.getCurrent();\n                var $head = $R.dom(current).closest('thead');\n                if ($head.length !== 0)\n                {\n                    $component.removeHead();\n                    this.caret.setStart($component);\n                }\n                else\n                {\n                    this.selection.save();\n                    $component.removeHead();\n                    this.selection.restore();\n                }\n            }\n        },\n        deleteColumn: function()\n        {\n            var $component = this._getComponent();\n            if ($component)\n            {\n                var current = this.selection.getCurrent();\n\n                var $currentCell = $R.dom(current).closest('td, th');\n                var nextCell = $currentCell.nextElement().get();\n                var prevCell = $currentCell.prevElement().get();\n\n                $component.removeColumn(current);\n\n                if (nextCell) this.caret.setStart(nextCell);\n                else if (prevCell) this.caret.setEnd(prevCell);\n                else this.deleteTable();\n            }\n        },\n        deleteRow: function()\n        {\n            var $component = this._getComponent();\n            if ($component)\n            {\n                var current = this.selection.getCurrent();\n\n                var $currentRow = $R.dom(current).closest('tr');\n                var nextRow = $currentRow.nextElement().get();\n                var prevRow = $currentRow.prevElement().get();\n                var $head = $R.dom(current).closest('thead');\n\n                $component.removeRow(current);\n\n                if (nextRow) this.caret.setStart(nextRow);\n                else if (prevRow) this.caret.setEnd(prevRow);\n                else if ($head.length !== 0) {\n                    $component.removeHead();\n                    this.caret.setStart($component);\n                }\n                else this.deleteTable();\n            }\n        },\n        deleteTable: function()\n        {\n            var table = this._getTable();\n            if (table)\n            {\n                this.component.remove(table);\n            }\n        },\n\n        // private\n        _getTable: function()\n        {\n            var current = this.selection.getCurrent();\n            var data = this.inspector.parse(current);\n            if (data.isTable())\n            {\n                return data.getTable();\n            }\n        },\n        _getComponent: function()\n        {\n            var current = this.selection.getCurrent();\n            var data = this.inspector.parse(current);\n            if (data.isTable())\n            {\n                var table = data.getTable();\n\n                return this.component.create('table', table);\n            }\n        },\n        _observeDropdown: function(dropdown)\n        {\n            var table = this._getTable();\n            var items = dropdown.getItemsByClass('redactor-table-item-observable');\n            var tableItem = dropdown.getItem('insert-table');\n            if (table)\n            {\n                this._observeItems(items, 'enable');\n                tableItem.disable();\n            }\n            else\n            {\n                this._observeItems(items, 'disable');\n                tableItem.enable();\n            }\n        },\n        _observeItems: function(items, type)\n        {\n            for (var i = 0; i < items.length; i++)\n            {\n                items[i][type]();\n            }\n        }\n    });\n})(Redactor);\n(function($R)\n{\n    $R.add('class', 'table.component', {\n        mixins: ['dom', 'component'],\n        init: function(app, el)\n        {\n            this.app = app;\n\n            // init\n            return (el && el.cmnt !== undefined) ? el : this._init(el);\n        },\n\n        // public\n        addHead: function()\n        {\n\t\t\tthis.removeHead();\n\n\t\t\tvar columns = this.$element.find('tr').first().children('td, th').length;\n\t\t\tvar $head = $R.dom('<thead>');\n            var $row = this._buildRow(columns, '<th>');\n\n            $head.append($row);\n            this.$element.prepend($head);\n        },\n        addRow: function(columns)\n        {\n            var $row = this._buildRow(columns);\n            this.$element.append($row);\n\n            return $row;\n        },\n        addRowTo: function(current, type)\n        {\n            return this._addRowTo(current, type);\n        },\n        addColumnTo: function(current, type)\n        {\n            var $current = $R.dom(current);\n            var $currentRow = $current.closest('tr');\n            var $currentCell = $current.closest('td, th');\n\n            var index = 0;\n            $currentRow.find('td, th').each(function(node, i)\n\t\t\t{\n\t\t\t\tif (node === $currentCell.get()) index = i;\n\t\t\t});\n\n\t\t\tthis.$element.find('tr').each(function(node)\n\t\t\t{\n    \t\t\tvar $node = $R.dom(node);\n\t\t\t\tvar origCell = $node.find('td, th').get(index);\n\t\t\t\tvar $origCell = $R.dom(origCell);\n\n\t\t\t\tvar $td = $origCell.clone();\n\t\t\t\t$td.html('<div data-redactor-tag=\"tbr\"></div>');\n\n\t\t\t\tif (type === 'right') $origCell.after($td);\n\t\t\t\telse                  $origCell.before($td);\n\t\t\t});\n        },\n        removeHead: function()\n        {\n\t\t\tvar $head = this.$element.find('thead');\n\t\t\tif ($head.length !== 0) $head.remove();\n        },\n        removeRow: function(current)\n        {\n            var $current = $R.dom(current);\n            var $currentRow = $current.closest('tr');\n\n            $currentRow.remove();\n        },\n        removeColumn: function(current)\n        {\n            var $current = $R.dom(current);\n            var $currentRow = $current.closest('tr');\n            var $currentCell = $current.closest('td, th');\n\n            var index = 0;\n            $currentRow.find('td, th').each(function(node, i)\n\t\t\t{\n\t\t\t\tif (node === $currentCell.get()) index = i;\n\t\t\t});\n\n\t\t\tthis.$element.find('tr').each(function(node)\n\t\t\t{\n    \t\t\tvar $node = $R.dom(node);\n\t\t\t\tvar origCell = $node.find('td, th').get(index);\n\t\t\t\tvar $origCell = $R.dom(origCell);\n\n\t\t\t\t$origCell.remove();\n\t\t\t});\n        },\n\n        // private\n        _init: function(el)\n        {\n            var wrapper, element;\n            if (typeof el !== 'undefined')\n            {\n                var $node = $R.dom(el);\n                var node = $node.get();\n                var $figure = $node.closest('figure');\n                if ($figure.length !== 0)\n                {\n                    wrapper = $figure;\n                    element = $figure.find('table').get();\n                }\n                else if (node.tagName === 'TABLE')\n                {\n                    element = node;\n                }\n            }\n\n            this._buildWrapper(wrapper);\n            this._buildElement(element);\n            this._initWrapper();\n        },\n        _addRowTo: function(current, position)\n        {\n            var $current = $R.dom(current);\n            var $currentRow = $current.closest('tr');\n            if ($currentRow.length !== 0)\n            {\n                var columns = $currentRow.children('td, th').length;\n                var $newRow = this._buildRow(columns);\n\n                $currentRow[position]($newRow);\n\n                return $newRow;\n            }\n        },\n        _buildRow: function(columns, tag)\n        {\n            tag = tag || '<td>';\n\n            var $row = $R.dom('<tr>');\n            for (var i = 0; i < columns; i++)\n            {\n                var $cell = $R.dom(tag);\n                $cell.attr('contenteditable', true);\n                $cell.html('<div data-redactor-tag=\"tbr\"></div>');\n\n                $row.append($cell);\n            }\n\n            return $row;\n        },\n        _buildElement: function(node)\n        {\n            if (node)\n            {\n                this.$element = $R.dom(node);\n            }\n            else\n            {\n                this.$element = $R.dom('<table>');\n                this.append(this.$element);\n            }\n        },\n        _buildWrapper: function(node)\n        {\n            node = node || '<figure>';\n\n            this.parse(node);\n        },\n        _initWrapper: function()\n        {\n            this.addClass('redactor-component');\n            this.attr({\n                'data-redactor-type': 'table',\n                'tabindex': '-1',\n                'contenteditable': false\n            });\n\n            if (this.app.detector.isIe())\n            {\n                this.removeAttr('contenteditable');\n            }\n        }\n    });\n\n})(Redactor);"],"names":["$R","Redactor","add","translations","en","init","app","this","lang","opts","caret","editor","toolbar","component","inspector","insertion","selection","ondropdown","table","observe","dropdown","_observeDropdown","onbottomclick","insertToEnd","getLastNode","start","title","get","api","classname","obj","$button","addButtonBefore","setIcon","setDropdown","insert","$component","create","i","addRow","insertHtml","setStart","addRowAbove","_getComponent","current","getCurrent","$row","addRowTo","addRowBelow","addColumnLeft","save","addColumnTo","restore","addColumnRight","addHead","deleteHead","dom","closest","length","removeHead","deleteColumn","$currentCell","nextCell","nextElement","prevCell","prevElement","removeColumn","setEnd","deleteTable","deleteRow","$currentRow","nextRow","prevRow","$head","removeRow","_getTable","remove","data","parse","isTable","getTable","items","getItemsByClass","tableItem","getItem","_observeItems","disable","enable","type","mixins","el","undefined","cmnt","_init","columns","$element","find","first","children","_buildRow","append","prepend","_addRowTo","$current","index","each","node","origCell","$origCell","$td","clone","html","after","before","wrapper","element","$node","$figure","tagName","_buildWrapper","_buildElement","_initWrapper","position","$newRow","tag","$cell","attr","addClass","detector","isIe","removeAttr"],"sourceRoot":""}