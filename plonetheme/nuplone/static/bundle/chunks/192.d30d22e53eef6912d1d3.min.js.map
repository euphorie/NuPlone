{"version":3,"file":"chunks/192.d30d22e53eef6912d1d3.min.js","mappings":"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","sources":["webpack://nuplone/./node_modules/redactor/src/plugins/properties/properties.js"],"sourcesContent":["(function($R)\n{\n    $R.add('plugin', 'properties', {\n        modals: {\n            'properties':\n                '<form action=\"\"> \\\n                    <div class=\"form-item\"> \\\n                        <label>Id</label> \\\n                        <input type=\"text\" name=\"id\"> \\\n                    </div> \\\n                    <div class=\"form-item\"> \\\n                        <label>Class</label> \\\n                        <input type=\"text\" name=\"classname\"> \\\n                    </div> \\\n                </form>'\n        },\n        translations: {\n    \t\ten: {\n    \t\t\t\"properties\": \"Properties\"\n    \t\t}\n        },\n        init: function(app)\n        {\n            this.app = app;\n            this.opts = app.opts;\n            this.lang = app.lang;\n            this.$body = app.$body;\n            this.toolbar = app.toolbar;\n            this.inspector = app.inspector;\n            this.selection = app.selection;\n\n            // local\n    \t\tthis.labelStyle = {\n        \t\t'font-family': 'monospace',\n    \t\t\t'position': 'absolute',\n    \t\t\t'padding': '2px 5px',\n    \t\t\t'line-height': 1,\n    \t\t\t'border-radius': '3px',\n    \t\t\t'font-size': '11px',\n    \t\t\t'color': 'rgba(255, 255, 255, .9)'\n    \t\t};\n        },\n        // messages\n        onmodal: {\n            properties: {\n                open: function($modal, $form)\n                {\n                    if (this.$block)\n                    {\n                        var blockData = this._getData(this.$block);\n                        $form.setData(blockData);\n                    }\n                },\n                opened: function($modal, $form)\n                {\n                    $form.getField('id').focus();\n                },\n                save: function($modal, $form)\n                {\n                    var data = $form.getData();\n                    this._save(data);\n                }\n            }\n        },\n        onbutton: {\n            properties: {\n                observe: function(button)\n                {\n                    this._observeButton(button);\n                }\n            }\n        },\n        onclick: function() {\n            //this._observeButton();\n        },\n\n        // public\n        start: function()\n        {\n            var data = {\n                title: this.lang.get('properties'),\n                api: 'plugin.properties.open',\n                observe: 'properties'\n            };\n\n            var $button = this.toolbar.addButton('properties', data);\n            $button.setIcon('<i class=\"re-icon-properties\"></i>');\n\n            this._createLabel();\n        },\n        stop: function()\n        {\n            this._removeLabel();\n        },\n        open: function()\n\t\t{\n           var block = this.selection.getBlock();\n           if (!block) return;\n\n           this.$block = $R.dom(block);\n\n           var options = {\n                title: this.lang.get('properties'),\n                width: '500px',\n                name: 'properties',\n                handle: 'save',\n                commands: {\n                    save: { title: this.lang.get('save') },\n                    cancel: { title: this.lang.get('cancel') }\n                }\n            };\n\n            this.app.api('module.modal.build', options);\n\t\t},\n\n\t\t// private\n\t\t_save: function(data)\n\t\t{\n    \t\tthis.app.api('module.modal.close');\n\n    \t\tif (data.id === '') this.$block.removeAttr('id');\n    \t\telse this.$block.attr('id', data.id);\n\n    \t\tif (data.classname === '') this.$block.removeAttr('class');\n    \t\telse this.$block.attr('class', data.classname);\n\t\t},\n\t\t_getData: function(block)\n\t\t{\n    \t    var $block = $R.dom(block);\n    \t    var data = {\n        \t    id: $block.attr('id'),\n        \t    classname: $block.attr('class')\n    \t    };\n\n    \t    return data;\n\t\t},\n\t\t_showData: function(block, data)\n\t\t{\n    \t\tvar str = '';\n    \t\tif (data.id) str += '#' + data.id + ' ';\n    \t\tif (data.classname) str += '.' + data.classname;\n\n\n            if (str !== '')\n            {\n                var $block = $R.dom(block);\n                var pos = $block.offset();\n\n                this.$label.css({\n                    top: (pos.top - 12) + 'px',\n                    left: pos.left + 'px',\n                    'z-index': (this.opts.zindex) ? (this.opts.zindex + 3) : 'auto'\n                });\n                this.$label.html(str);\n                this.$label.show();\n            }\n            else\n            {\n                this.$label.hide();\n            }\n\t\t},\n\t\t_createLabel: function()\n\t\t{\n            this.$label = $R.dom('<span />');\n            this.$label.hide();\n\t\t\tthis.$label.css(this.labelStyle).css('background', 'rgba(229, 57, 143, .7)');\n\n\t\t\tthis.$body.append(this.$label);\n\t\t},\n\t\t_removeLabel: function()\n\t\t{\n            if (this.$label) this.$label.remove();\n\t\t},\n\t\t_observeButton: function(button)\n\t\t{\n    \t\tvar block = this.selection.getBlock();\n    \t\tvar data = this.inspector.parse(block);\n\n    \t\tif (block && !data.isComponent())\n    \t\t{\n        \t\tvar blockData = this._getData(block);\n\n                this._showData(block, blockData);\n        \t    button.enable();\n    \t\t}\n    \t\telse\n    \t\t{\n        \t    button.disable();\n        \t    if (this.$label) this.$label.hide();\n    \t\t}\n\t\t}\n    });\n})(Redactor);"],"names":["$R","Redactor","add","modals","translations","en","init","app","this","opts","lang","$body","toolbar","inspector","selection","labelStyle","onmodal","properties","open","$modal","$form","$block","blockData","_getData","setData","opened","getField","focus","save","data","getData","_save","onbutton","observe","button","_observeButton","onclick","start","title","get","api","addButton","setIcon","_createLabel","stop","_removeLabel","block","getBlock","dom","options","width","name","handle","commands","cancel","id","removeAttr","attr","classname","_showData","str","pos","offset","$label","css","top","left","zindex","html","show","hide","append","remove","parse","isComponent","enable","disable"],"sourceRoot":""}